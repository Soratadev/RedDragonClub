<div class="bg-dorado-opacity-75 w-full min-h-screen ">
  <div class="p-2"></div>
  <div class="container mx-auto p-4 bg-granate rounded-md border-2 border-black mb-2">
    <h2 class="text-dorado font-bold text-2xl text-center mb-4 underline">User List</h2>
  </div>
  <div *ngIf="users.length === 0" class="text-center text-white border border-gray-950 p-4">
    <p>Loading users...</p>
  </div>

  <table *ngIf="users.length > 0" class="w-[80%] mx-auto table-auto border-collapse border border-black">
    <thead>
    <tr class="bg-dorado text-black">
      <th class="border border-gray-300 p-2">ID</th>
      <th class="border border-gray-300 p-2">Username</th>
      <th class="border border-gray-300 p-2">Email</th>
      <th class="border border-gray-300 p-2">Birthdate</th>
      <th class="border border-gray-300 p-2">Date of joining</th>
      <th class="border border-gray-300 p-2">Admin?</th>
      <th class="border border-gray-300 p-2">Manage</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let user of users" class="text-center">
      <td class="border border-gray-300 p-2 text-center">{{ user.id }}</td>
      <td class="border border-gray-300 p-2">{{ user.username }}</td>
      <td class="border border-gray-300 p-2">{{ user.email }}</td>
      <td class="border border-gray-300 p-2">{{ user.birthdate | date: 'dd-MM-yyyy' }}</td>
      <td class="border border-gray-300 p-2">{{ user.dateOfJoining | date: 'dd-MM-yyyy' }}</td>
      <td class="border border-gray-300 p-2 text-center">
          <span [class]="user.isAdmin ? 'font-bold' : 'text-black'">
            {{ user.isAdmin ? 'True' : 'False' }}
          </span>
      </td>
      <td class="border border-gray-300 p-1 text-center">
        <button (click)="editUser(user)" class="bg-blue-600 hover:bg-blue-800 text-white border border-black font-bold mr-4 py-2 px-4 rounded w-20">
          Edit
        </button>
        <button (click)="deleteUser(user.id)" class="bg-red-600 hover:bg-red-800 text-white border border-black font-bold py-2 px-4 rounded w-20">
          Delete
        </button>
      </td>
    </tr>
    </tbody>
  </table>
  <div *ngIf="isEditing" class="mt-4 p-4 border-2 border-dorado rounded text-center w-[50%] mx-auto">
    <h3 class="font-bold text-lg mb-4">Edit user</h3>
    <form>
      <label class="block mb-2">Username:
        <input
          type="text"
          [value]="editedUser?.username"
          (input)="onInputChange( $event, 'username')"
          class="bg-yellow-100 border border-gray-500 rounded w-72 p-2">
      </label>
      <label class="block mb-2">Email:
        <input
          type="email"
          [value]="editedUser?.email"
          (input)="onInputChange( $event, 'email')"
          class="bg-yellow-100 border border-gray-500 rounded w-72 p-2 ml-8">
      </label>
      <label class="block mb-2">Birthdate:
        <input
          type="date"
          [value]="editedUser?.birthdate | date: 'yyyy-MM-dd'"
          (input)="onInputChange( $event, 'birthdate')"
          class="bg-yellow-100 border border-gray-500 rounded w-72 p-2 ml-1">
      </label>
      <div class="mt-4 flex justify-end">
        <button
          type="button"
          class="bg-gray-500 text-white px-4 py-2 rounded mr-2"
          (click)="cancelEdit()">Cancelar</button>
        <button
          type="button"
          class="bg-green-500 text-white px-4 py-2 rounded"
          (click)="saveUser()">Guardar</button>
      </div>
    </form>

  </div>
</div>
